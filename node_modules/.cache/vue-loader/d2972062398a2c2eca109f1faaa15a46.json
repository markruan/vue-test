{"remainingRequest":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/vue/vue-test/src/components/my.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/vue/vue-test/src/components/my.vue","mtime":1603436548493},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Toast } from \"vant\";\nimport { mapState, mapActions } from \"vuex\";\nimport List from \"../components/List\";\nexport default {\n  data() {\n    return {\n      islogin: false,\n      activeName: \"\",\n      myList: [],\n      myClectd: [],\n      loading: true,\n      finished: false\n    };\n  },\n  components: {\n    List\n  },\n  watch: {\n    myClectd(val) {}\n  },\n  created() {\n    this.getUserInfo();\n    if (this.islogin) {\n      this.getMyList();\n    }\n  },\n  methods: {\n    getUserInfo() {\n      if (localStorage.getItem(\"userinfo\")) {\n        this.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\n        this.islogin = true;\n      } else {\n        this.islogin = false;\n      }\n    },\n    async getMyList() {\n      const res = await this.$http.get(this.host + \"/user/playlist\", {\n        params: { uid: this.userinfo.userId }\n      });\n      if (res.data.code == 200) {\n        const List = res.data.playlist;\n        List.forEach(item => {\n          if (\n            item.creator.userId ==\n            JSON.parse(localStorage.getItem(\"userinfo\")).userId\n          ) {\n            this.myList.push(item);\n          } else {\n            this.myClectd.push(item);\n          }\n        });\n      } else {\n        Toast(\"登录错误\");\n      }\n    },\n    goLogin() {\n      alert(9);\n      this.$router.push(\"/login\");\n    },\n    loginOut() {\n      localStorage.removeItem(\"userinfo\");\n      this.getUserInfo();\n    }\n  }\n};\n",{"version":3,"sources":["my.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"my.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div v-if=\"islogin\" style=\"margin-top:5%\">\n      <div class=\"mian\">\n        <van-image round width=\"6rem\" height=\"6rem\" :src=\"userinfo.avatarUrl\" />\n      </div>\n\n      <h3 style=\"text-align: center;\" v-text=\"userinfo.nickname||'未登录'\"></h3>\n      <h5 style=\"text-align: center;\" v-text=\"userinfo.signature\"></h5>\n      <van-grid clickable :column-num=\"3\" :border=\"false\">\n        <van-grid-item text=\"动态\" to=\"/\">\n          <template #icon>\n            <span>{{userinfo.eventCount}}</span>\n          </template>\n        </van-grid-item>\n        <van-grid-item text=\"关注\" to=\"/\">\n          <template #icon>\n            <span>{{userinfo.followeds}}</span>\n          </template>\n        </van-grid-item>\n        <van-grid-item text=\"粉丝\" to=\"/\">\n          <template #icon>\n            <span>{{userinfo.follows}}</span>\n          </template>\n        </van-grid-item>\n      </van-grid>\n\n      <van-cell-group>\n        <van-cell title=\"本地音乐\" is-link icon=\"music-o\" />\n        <van-cell title=\"我的收藏\" is-link icon=\"star-o\" value=\"内容\" />\n      </van-cell-group>\n      <van-collapse v-model=\"activeName\" accordion>\n        <van-collapse-item icon=\"user-o\" title=\"我创建的歌单\" :value=\"myList.length\" name=\"1\">\n          <List :hotList=\"myList\" />\n        </van-collapse-item>\n        <van-collapse-item icon=\"like-o\" title=\"我收藏的歌单\" :value=\"myClectd.length\" name=\"2\">\n          <List :hotList=\"myClectd\" />\n        </van-collapse-item>\n      </van-collapse>\n\n      <div style=\"margin: 16px;\">\n        <van-button round block type=\"warning\" @click=\"loginOut\" style=\"margin-top:40px\">注销</van-button>\n      </div>\n    </div>\n    <van-empty v-else description=\"未登录\"  >\n        <van-button @click=\"goLogin\" round type=\"danger\" class=\"bottom-button\">\n        登录\n      </van-button>\n    </van-empty>\n  </div>\n</template>>\n<script>\nimport { Toast } from \"vant\";\nimport { mapState, mapActions } from \"vuex\";\nimport List from \"../components/List\";\nexport default {\n  data() {\n    return {\n      islogin: false,\n      activeName: \"\",\n      myList: [],\n      myClectd: [],\n      loading: true,\n      finished: false\n    };\n  },\n  components: {\n    List\n  },\n  watch: {\n    myClectd(val) {}\n  },\n  created() {\n    this.getUserInfo();\n    if (this.islogin) {\n      this.getMyList();\n    }\n  },\n  methods: {\n    getUserInfo() {\n      if (localStorage.getItem(\"userinfo\")) {\n        this.userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\n        this.islogin = true;\n      } else {\n        this.islogin = false;\n      }\n    },\n    async getMyList() {\n      const res = await this.$http.get(this.host + \"/user/playlist\", {\n        params: { uid: this.userinfo.userId }\n      });\n      if (res.data.code == 200) {\n        const List = res.data.playlist;\n        List.forEach(item => {\n          if (\n            item.creator.userId ==\n            JSON.parse(localStorage.getItem(\"userinfo\")).userId\n          ) {\n            this.myList.push(item);\n          } else {\n            this.myClectd.push(item);\n          }\n        });\n      } else {\n        Toast(\"登录错误\");\n      }\n    },\n    goLogin() {\n      alert(9);\n      this.$router.push(\"/login\");\n    },\n    loginOut() {\n      localStorage.removeItem(\"userinfo\");\n      this.getUserInfo();\n    }\n  }\n};\n</script>\n<style scoped>\n.mian {\n  margin-top: 2%;\n  width: 70%;\n  margin: 0 auto;\n  text-align: center;\n}\n.bottom-button {\n    width: 160px;\n    height: 40px;\n  }\n</style>"]}]}