{"remainingRequest":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/vue/vue-test/src/pages/MoreGeDan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/vue/vue-test/src/pages/MoreGeDan.vue","mtime":1603436242298},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      catList: [],\n      tabIndex: 0,\n      active: \"home\",\n      geDanList: [],\n      isloading: true\n    };\n  },\n  watch: {},\n\n  methods: {\n    getCatList() {\n      const list = localStorage.getItem(\"catlist\");\n      if (list != null) {\n        this.catList = JSON.parse(localStorage.getItem(\"catlist\"));\n        this.getGeDanList(0);\n      } else {\n        console.log(\"http\");\n        this.$http\n          .get(this.host + \"/playlist/catlist\")\n          .then(response => {\n            this.catList = response.data.sub;\n            this.getGeDanList(0);\n            localStorage.setItem(\"catlist\", JSON.stringify(this.catList));\n          })\n          .catch(error => {\n            console.log(\"接口或处理逻辑出错\");\n          });\n      }\n    },\n    getGeDanList(index) {\n      this.$http\n        .get(this.host + \"/top/playlist\", {\n          params: { cat: this.catList[index].name, limit: 21 }\n        })\n        .then(response => {\n          this.geDanList = response.data.playlists;\n          if(this.geDanList .length>20){\n             this.isloading = false;\n          }\n\n          // this.$nextTick(() => {\n            \n          // });\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    },\n    indexChange(e) {\n      this.getGeDanList(e);\n      this.isloading = true;\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    imgLoad(e) {\n      this.isloading = false;\n    }\n  },\n  mounted() {\n    this.getCatList();\n  }\n};\n",{"version":3,"sources":["MoreGeDan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MoreGeDan.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <van-nav-bar title=\"歌单广场\" left-text=\"返回\" @click-left=\"onClickLeft\" left-arrow />\n\n    <van-tabs v-model=\"active\" sticky @change=\"indexChange\" swipeable>\n      <van-tab v-for=\"item in catList\" :key=\"item.name\" :title=\"item.name \" animated>\n        <van-loading v-if=\"isloading\" type=\"circular\" color=\"#1989fa\" vertical />\n        <van-grid v-else :column-num=\"3\" :border=\"false\">\n          <van-grid-item v-for=\"value in geDanList\" :key=\"value.id\" :to=\"'/list/'+value.id\">\n            <van-image\n              :src=\"value.coverImgUrl+'?param=150y150'\"\n              lazy-load\n              @load=\"imgLoad\"\n              :loading-icon=\"require('../assets/loading.gif')\"\n              width=\"100%\"\n              fit=\"contain\"\n            />\n            <span\n              style=\"font-size:12px;height:32px;line-height:1.4\"\n              class=\"van-multi-ellipsis--l2\"\n            >{{value.name}}</span>\n          </van-grid-item>\n        </van-grid>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      catList: [],\n      tabIndex: 0,\n      active: \"home\",\n      geDanList: [],\n      isloading: true\n    };\n  },\n  watch: {},\n\n  methods: {\n    getCatList() {\n      const list = localStorage.getItem(\"catlist\");\n      if (list != null) {\n        this.catList = JSON.parse(localStorage.getItem(\"catlist\"));\n        this.getGeDanList(0);\n      } else {\n        console.log(\"http\");\n        this.$http\n          .get(this.host + \"/playlist/catlist\")\n          .then(response => {\n            this.catList = response.data.sub;\n            this.getGeDanList(0);\n            localStorage.setItem(\"catlist\", JSON.stringify(this.catList));\n          })\n          .catch(error => {\n            console.log(\"接口或处理逻辑出错\");\n          });\n      }\n    },\n    getGeDanList(index) {\n      this.$http\n        .get(this.host + \"/top/playlist\", {\n          params: { cat: this.catList[index].name, limit: 21 }\n        })\n        .then(response => {\n          this.geDanList = response.data.playlists;\n          if(this.geDanList .length>20){\n             this.isloading = false;\n          }\n\n          // this.$nextTick(() => {\n            \n          // });\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    },\n    indexChange(e) {\n      this.getGeDanList(e);\n      this.isloading = true;\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    imgLoad(e) {\n      this.isloading = false;\n    }\n  },\n  mounted() {\n    this.getCatList();\n  }\n};\n</script>\n<style scoped>\n</style>>"]}]}