{"remainingRequest":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js!/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/vue/vue-test/src/pages/player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/vue/vue-test/src/pages/player.vue","mtime":1603451513846},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mark/vue/vue-test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/mark/vue/vue-test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapActions } from \"vuex\";\nimport LyricScroll from \"vue-lyric-scroll\";\nimport audioPlayer from \"../components/audio-player\";\nexport default {\n  name: \"app\",\n  data: function data() {\n    return {\n      isfull: false,\n      audioSources: {},\n      audioList: [],\n      timeupdate: {},\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active: \"lyric-active\",\n      lyricShow: false\n    };\n  },\n  components: {\n    LyricScroll: LyricScroll,\n    audioPlayer: audioPlayer\n  },\n  created: function created() {\n    this.init();\n    this.setShowAplayerActions(false);\n  },\n  watch: {\n    currentTime: function currentTime(val) {\n      if (val) {\n        this.lyricShow = true;\n      }\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    next();\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions([\"setSongIdActions\", \"setShowAplayerActions\"])), {}, {\n    init: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setSongIdActions(this.$route.params.id);\n                _context.next = 3;\n                return this.getlyric();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    timeStrToNum: function timeStrToNum(str) {\n      var minute = Number(str.slice(0, 2));\n      var second = Number(str.slice(3, 5));\n      var minSec = Number(str.slice(6, 8));\n      return minute * 60 + second + minSec / 100;\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj: function lyricToObj(lyricStr) {\n      var _this = this;\n\n      var obj = {};\n      var perLyric;\n      var time;\n      lyricStr.split(\"\\n\").forEach(function (item, idx) {\n        perLyric = item.slice(item.indexOf(\"]\") + 1);\n\n        if (perLyric) {\n          time = _this.timeStrToNum(item.slice(1, 9));\n          obj[time] = perLyric;\n        }\n      });\n      return obj;\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1); //返回上一层\n\n      this.setShowAplayerActions(true);\n    },\n    getlyric: function () {\n      var _getlyric = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var self;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                self = this;\n                _context2.next = 3;\n                return this.$http.get(this.host + \"/lyric\", {\n                  params: {\n                    id: this.$route.params.id\n                  }\n                }).then(function (response) {\n                  if (response.data.lrc.lyric) {\n                    _this2.lyric = self.lyricToObj(response.data.lrc.lyric);\n                  }\n                }).catch(function (error) {\n                  console.log(\"接口或处理逻辑出错\");\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getlyric() {\n        return _getlyric.apply(this, arguments);\n      }\n\n      return getlyric;\n    }()\n  }),\n  mounted: function mounted() {},\n  computed: _objectSpread({}, mapState([\"songArtist\", \"songId\", \"songImg\", \"songName\", \"songUrl\", \"playing\", \"currentTime\"]))\n};",{"version":3,"sources":["player.vue"],"names":[],"mappings":"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","sourcesContent":[" \n<template>\n  <div>\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\n    <div>\n      <van-swipe class=\"my-swipe myswipe\" indicator-color=\"red\" v-if=\"songImg\">\n        <van-swipe-item>\n          <div class=\"v-image\">\n            <div class=\"border\">\n              <van-image\n                :src=\"songImg+'?param=300y300'\"\n                round\n                :class=\"{'Rotation':playing}\"\n                style=\"width:100%\"\n              ></van-image>\n            </div>\n            <div class=\"title\">{{songName+'-'+songArtist}}</div>\n          </div>\n        </van-swipe-item>\n\n        <van-swipe-item v-if=\"lyricShow\" class=\"v-lyric\">\n          <LyricScroll\n            :lyric=\"lyric\"\n            lyricLineheight=\"1.2em\"\n            :current-time=\"currentTime\"\n            :lyricActiveClass=\"active\"\n          />\n        </van-swipe-item>\n      </van-swipe>\n      <audioPlayer class=\"player\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport LyricScroll from \"vue-lyric-scroll\";\nimport audioPlayer from \"../components/audio-player\";\n\nexport default {\n  name: \"app\",\n  data() {\n    return {\n      isfull: false,\n      audioSources: {},\n      audioList: [],\n      timeupdate: {},\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active: \"lyric-active\",\n      lyricShow: false\n    };\n  },\n  components: {\n    LyricScroll,\n    audioPlayer\n  },\n  created() {\n    this.init();\n    this.setShowAplayerActions(false)\n  },\n  watch: {\n    currentTime: function(val) { \n      if (val) {\n        this.lyricShow = true;\n      }\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n     \n    next()\n  },\n  methods: {\n    ...mapActions([\"setSongIdActions\",\"setShowAplayerActions\"]),\n    async init() {\n      this.setSongIdActions(this.$route.params.id);\n      await this.getlyric();\n    },\n    timeStrToNum(str) {\n      const minute = Number(str.slice(0, 2));\n      const second = Number(str.slice(3, 5));\n      const minSec = Number(str.slice(6, 8));\n      return minute * 60 + second + minSec / 100;\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj(lyricStr) {\n      const obj = {};\n      let perLyric;\n      let time;\n      lyricStr.split(\"\\n\").forEach((item, idx) => {\n        perLyric = item.slice(item.indexOf(\"]\") + 1);\n        if (perLyric) {\n          time = this.timeStrToNum(item.slice(1, 9));\n          obj[time] = perLyric;\n        }\n      });\n      return obj;\n    },\n    onClickLeft() {\n      this.$router.go(-1); //返回上一层\n      this.setShowAplayerActions(true)\n    },\n    async getlyric() {\n      const self = this;\n      await this.$http\n        .get(this.host + \"/lyric\", { params: { id: this.$route.params.id } })\n        .then(response => {\n          if (response.data.lrc.lyric) {\n            this.lyric = self.lyricToObj(response.data.lrc.lyric);\n          }\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    }\n  },\n  mounted() {},\n  computed: {\n    ...mapState([\"songArtist\", \"songId\", \"songImg\", \"songName\", \"songUrl\",\"playing\",\"currentTime\"])\n  }\n};\n</script>\n <style scoped >\n.v-lyric {\n  text-align: center !important;\n}\n.lyric-active {\n  color: red !important;\n  font-size: 20px;\n}\n.v-image {\n  position: absolute;\n  left: 15%;\n  top: 15%;\n  width: 70%;\n  box-sizing: border-box;\n}\n.border {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n@-webkit-keyframes rotation {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n\n.Rotation {\n  -webkit-transform: rotate(360deg);\n  animation: rotation 8s linear infinite;\n  -moz-animation: rotation 8s linear infinite;\n  -webkit-animation: rotation 8s linear infinite;\n  -o-animation: rotation 8s linear infinite;\n}\n.title {\n  padding-top: 12px;\n  text-align: center;\n}\n.myswipe {\n  height: 25rem;\n}\n.audio-player {\n  margin: 0 15px;\n  position: fixed;\n  width: 90%;\n  bottom: 0;\n}\n</style>"],"sourceRoot":"src/pages"}]}