{"remainingRequest":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js!/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/vue/vue-test/src/pages/player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/vue/vue-test/src/pages/player.vue","mtime":1604732142349},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mark/vue/vue-test/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/mark/vue/vue-test/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapActions } from \"vuex\";\nimport LyricScroll from \"vue-lyric-scroll\";\nexport default {\n  name: \"app\",\n  data: function data() {\n    return {\n      isfull: false,\n      audioSources: {},\n      audioList: [],\n      timeupdate: {},\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active: \"lyric-active\",\n      lyricShow: false,\n      currentTimeAfterFormat: \"\",\n      // 音频播放当时时间（格式化后）\n      sliderTime: 0\n    };\n  },\n  components: {\n    LyricScroll: LyricScroll\n  },\n  created: function created() {\n    this.init();\n    this.setShowAplayerActions(false);\n  },\n  watch: {\n    currentTime: function currentTime(val) {\n      if (val) {\n        this.lyricShow = true;\n      }\n\n      this.currentTimeAfterFormat = this.formatTime(val);\n      this.sliderTime = parseInt(val / this.duration * 100);\n    }\n  },\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    next();\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions([\"setSongIdActions\", \"setShowAplayerActions\", \"setPlayingActions\"])), {}, {\n    init: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setSongIdActions(this.$route.params.id);\n                _context.next = 3;\n                return this.getlyric();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    // 格式化秒为分\n    formatTime: function formatTime(second) {\n      return [parseInt(second / 60 % 60), parseInt(second % 60)].join(\":\").replace(/\\b(\\d)\\b/g, \"0$1\");\n    },\n    playerPause: function playerPause() {\n      this.setPlayingActions(!this.playing);\n    },\n    timeStrToNum: function timeStrToNum(str) {\n      var minute = Number(str.slice(0, 2));\n      var second = Number(str.slice(3, 5));\n      var minSec = Number(str.slice(6, 8));\n      return minute * 60 + second + minSec / 100;\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj: function lyricToObj(lyricStr) {\n      var _this = this;\n\n      var obj = {};\n      var perLyric;\n      var time;\n      lyricStr.split(\"\\n\").forEach(function (item, idx) {\n        perLyric = item.slice(item.indexOf(\"]\") + 1);\n\n        if (perLyric) {\n          time = _this.timeStrToNum(item.slice(1, 9));\n          obj[time] = perLyric;\n        }\n      });\n      return obj;\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1); //返回上一层\n\n      this.setShowAplayerActions(true);\n    },\n    getlyric: function () {\n      var _getlyric = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var self;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                self = this;\n                _context2.next = 3;\n                return this.$http.get(this.host + \"/lyric\", {\n                  params: {\n                    id: this.$route.params.id\n                  }\n                }).then(function (response) {\n                  if (response.data.lrc.lyric) {\n                    _this2.lyric = self.lyricToObj(response.data.lrc.lyric);\n                  }\n                }).catch(function (error) {\n                  console.log(\"接口或处理逻辑出错\");\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getlyric() {\n        return _getlyric.apply(this, arguments);\n      }\n\n      return getlyric;\n    }()\n  }),\n  mounted: function mounted() {},\n  computed: _objectSpread({}, mapState([\"songArtist\", \"songId\", \"songImg\", \"songName\", \"songUrl\", \"playing\", \"currentTime\", \"duration\"]))\n};",{"version":3,"sources":["player.vue"],"names":[],"mappings":"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","sourcesContent":[" \n<template>\n  <div>\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\n    <div>\n      <van-swipe class=\"my-swipe myswipe\" indicator-color=\"red\" v-if=\"songImg\">\n        <van-swipe-item>\n          <div class=\"v-image\">\n            <div class=\"border\">\n              <van-image\n                :src=\"songImg+'?param=300y300'\"\n                round\n                :class=\"{'Rotation':playing}\"\n                style=\"width:100%\"\n              ></van-image>\n            </div>\n            <div class=\"title\">{{songName+'-'+songArtist}}</div>\n          </div>\n        </van-swipe-item>\n\n        <van-swipe-item v-if=\"lyricShow\" class=\"v-lyric\">\n          <LyricScroll\n            :lyric=\"lyric\"\n            lyricLineheight=\"1.2rem\"\n            :current-time=\"currentTime\"\n            :lyricActiveClass=\"active\"\n          />\n        </van-swipe-item>\n      </van-swipe>\n      <div class=\"audio-player\">\n        <div class=\"audio__btn-wrap\">\n          <div class=\"audio__play--previous\">\n            <van-icon name=\"arrow-left\" />\n          </div>\n\n          <div @click=\"playerPause()\" v-if=\"playing\" class=\"audio__play--pause\">\n            <van-icon name=\"pause-circle-o\" />\n          </div>\n          <div v-else @click=\"playerPause()\" class=\"audio__play--start\">\n            <van-icon name=\"play-circle-o\" />\n          </div>\n\n          <div class=\"audio__play--next\">\n            <van-icon name=\"arrow\" />\n          </div>\n        </div>\n\n        <div class=\"audio__progress-wrap\" ref=\"audioProgressWrap\">\n          <div class=\"audio__progress\" ref=\"audioProgress\" :style=\"'width:'+sliderTime+'%'\" />\n          <div\n            class=\"audio__progress-point\"\n            ref=\"audioProgressPoint\"\n            :style=\"'left:'+sliderTime+'%'\"\n          />\n        </div>\n\n        <div class=\"audio__time-wrap\">\n          <div class=\"audio__current-time\" v-text=\"currentTimeAfterFormat\">0：00</div>\n          <div\n            class=\"audio__duration\"\n            v-text=\"formatTime(duration)=='NaN'?'3:51':formatTime(duration)\"\n          ></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport LyricScroll from \"vue-lyric-scroll\";\n\nexport default {\n  name: \"app\",\n  data() {\n    return {\n      isfull: false,\n      audioSources: {},\n      audioList: [],\n      timeupdate: {},\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active: \"lyric-active\",\n      lyricShow: false,\n      currentTimeAfterFormat: \"\", // 音频播放当时时间（格式化后）\n      sliderTime: 0\n    };\n  },\n  components: {\n    LyricScroll\n  },\n  created() {\n    this.init();\n    this.setShowAplayerActions(false);\n  },\n  watch: {\n    currentTime: function(val) {\n      if (val) {\n        this.lyricShow = true;\n      }\n      this.currentTimeAfterFormat = this.formatTime(val);\n      this.sliderTime = parseInt((val / this.duration) * 100);\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    next();\n  },\n  methods: {\n    ...mapActions([\n      \"setSongIdActions\",\n      \"setShowAplayerActions\",\n      \"setPlayingActions\"\n    ]),\n    async init() {\n      this.setSongIdActions(this.$route.params.id);\n      await this.getlyric();\n    },\n    // 格式化秒为分\n    formatTime(second) {\n      return [parseInt((second / 60) % 60), parseInt(second % 60)]\n        .join(\":\")\n        .replace(/\\b(\\d)\\b/g, \"0$1\");\n    },\n    playerPause() {\n      this.setPlayingActions(!this.playing);\n    },\n    timeStrToNum(str) {\n      const minute = Number(str.slice(0, 2));\n      const second = Number(str.slice(3, 5));\n      const minSec = Number(str.slice(6, 8));\n      return minute * 60 + second + minSec / 100;\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj(lyricStr) {\n      const obj = {};\n      let perLyric;\n      let time;\n      lyricStr.split(\"\\n\").forEach((item, idx) => {\n        perLyric = item.slice(item.indexOf(\"]\") + 1);\n        if (perLyric) {\n          time = this.timeStrToNum(item.slice(1, 9));\n          obj[time] = perLyric;\n        }\n      });\n      return obj;\n    },\n    onClickLeft() {\n      this.$router.go(-1); //返回上一层\n      this.setShowAplayerActions(true);\n    },\n    async getlyric() {\n      const self = this;\n      await this.$http\n        .get(this.host + \"/lyric\", { params: { id: this.$route.params.id } })\n        .then(response => {\n          if (response.data.lrc.lyric) {\n            this.lyric = self.lyricToObj(response.data.lrc.lyric);\n          }\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    }\n  },\n  mounted() {},\n  computed: {\n    ...mapState([\n      \"songArtist\",\n      \"songId\",\n      \"songImg\",\n      \"songName\",\n      \"songUrl\",\n      \"playing\",\n      \"currentTime\",\n      \"duration\"\n    ])\n  }\n};\n</script>\n <style scoped >\n.lyric-view[data-v-47b84102] {\n  padding-top: 30px;\n}\n.v-lyric {\n  text-align: center !important;\n}\n.lyric-active {\n  color: red !important;\n  font-size: 20px !important;\n}\n.v-image {\n  position: absolute;\n  left: 15%;\n  top: 15%;\n  width: 70%;\n  box-sizing: border-box;\n}\n.border {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n@-webkit-keyframes rotation {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n\n.Rotation {\n  -webkit-transform: rotate(360deg);\n  animation: rotation 8s linear infinite;\n  -moz-animation: rotation 8s linear infinite;\n  -webkit-animation: rotation 8s linear infinite;\n  -o-animation: rotation 8s linear infinite;\n}\n.title {\n  padding-top: 12px;\n  text-align: center;\n}\n.myswipe {\n  height: 25rem;\n}\n.audio-player {\n  margin: 0 15px;\n  position: fixed;\n  width: 90%;\n  bottom: 0;\n}\n.audio-player {\n  margin: 0 15px;\n}\n\n.audio-player .audio__btn-wrap {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.audio-player .audio__btn-wrap .audio__play__icon {\n  width: 100%;\n  height: 100%;\n  fill: currentColor;\n  overflow: hidden;\n  color: #e35924;\n}\n\n.audio-player .audio__btn-wrap .audio__play--previous {\n  font-size: 33px;\n  width: 21px;\n  height: 33px;\n}\n\n.audio-player .audio__btn-wrap .audio__play--previous.disable {\n  opacity: 0.5;\n}\n\n.audio-player .audio__btn-wrap .audio__play--start {\n  font-size: 42px;\n  width: 42px;\n  height: 42px;\n  margin: 0 30px 0 40px;\n}\n\n.audio-player .audio__btn-wrap .audio__play--pause {\n  font-size: 42px;\n  width: 42px;\n  height: 42px;\n  margin: 0 30px 0 40px;\n}\n\n.audio-player .audio__btn-wrap .audio__play--next {\n  font-size: 33px;\n  width: 21px;\n  height: 33px;\n}\n\n.audio-player .audio__btn-wrap .audio__play--next.disable {\n  opacity: 0.5;\n}\n\n.audio-player .audio__progress-wrap {\n  position: relative;\n  background: #ddd;\n  height: 2px;\n  margin-top: 10px;\n}\n\n.audio-player .audio__progress-wrap .audio__progress {\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  width: 0;\n  background: #e35924;\n}\n\n.audio-player .audio__progress-wrap .audio__progress-point {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  margin-top: -8px;\n  background: #e35924;\n  box-shadow: 0 0 10px 1px rgba(227, 89, 36, 0.5);\n}\n.lyric-active {\n  color: red;\n  font-size: 18px;\n}\n.audio-player .audio__progress-wrap .audio__progress-point:after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 8px;\n  height: 8px;\n  margin: -4px 0 0 -4px;\n  background: #fff;\n  border-radius: 50%;\n}\n\n.audio-player .audio__time-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  margin-top: 7px;\n}\n\n.audio-player .audio__time-wrap .audio__current-time {\n  font-size: 10px;\n  color: #888;\n}\n\n.audio-player .audio__time-wrap .audio__duration {\n  font-size: 10px;\n  color: #888;\n}\n\n.audio-player .audio-player__audio {\n  display: block;\n  margin: 0 auto;\n}\n</style>"],"sourceRoot":"src/pages"}]}