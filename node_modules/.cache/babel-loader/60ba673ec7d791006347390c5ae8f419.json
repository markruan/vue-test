{"remainingRequest":"/Users/mc/项目/VUE/2020/node_modules/thread-loader/dist/cjs.js!/Users/mc/项目/VUE/2020/node_modules/babel-loader/lib/index.js!/Users/mc/项目/VUE/2020/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mc/项目/VUE/2020/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mc/项目/VUE/2020/src/pages/player.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mc/项目/VUE/2020/src/pages/player.vue","mtime":1602570077590},{"path":"/Users/mc/项目/VUE/2020/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mc/项目/VUE/2020/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mc/项目/VUE/2020/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mc/项目/VUE/2020/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mc/项目/VUE/2020/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _defineProperty from \"/Users/mc/\\u9879\\u76EE/VUE/2020/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapActions } from \"vuex\";\nimport { AudioPlayer } from \"@liripeng/vue-audio-player\";\nimport \"@liripeng/vue-audio-player/lib/vue-audio-player.css\";\nimport LyricScroll from \"vue-lyric-scroll\";\nexport default {\n  name: \"app\",\n  data: function data() {\n    return {\n      audioSources: {},\n      audioList: [],\n      duration: {},\n      timeupdate: {},\n      currentTime: 0,\n      isPlaying: false,\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active: \"lyric-active\"\n    };\n  },\n  components: {\n    AudioPlayer: AudioPlayer,\n    LyricScroll: LyricScroll\n  },\n  watch: {\n    isPlayinga: function isPlayinga(old, nw) {\n      //监听正在播放的歌曲改变\n      console.log(old);\n    }\n  },\n  methods: {\n    stopP: function stopP() {\n      this.isPlaying = false;\n    },\n    iPlaying: function iPlaying() {\n      this.isPlaying = true;\n      var audio = this.$refs.audio;\n    },\n    onTimeUpdate: function onTimeUpdate(e) {\n      this.currentTime = e.target.currentTime;\n      console.log(this.currentTime);\n    },\n    getDuration: function getDuration() {\n      var audio = this.$refs.audio; //此时可以获取到duration\n\n      this.duration = audio.duration;\n    },\n    timeStrToNum: function timeStrToNum(str) {\n      var minute = Number(str.slice(0, 2));\n      var second = Number(str.slice(3, 5));\n      var minSec = Number(str.slice(6, 8));\n      return minute * 60 + second + minSec / 100;\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj: function lyricToObj(lyricStr) {\n      var _this = this;\n\n      var obj = {};\n      var perLyric;\n      var time;\n      lyricStr.split('\\n').forEach(function (item, idx) {\n        perLyric = item.slice(item.indexOf(']') + 1);\n\n        if (perLyric) {\n          time = _this.timeStrToNum(item.slice(1, 9));\n          obj[time] = perLyric;\n        }\n      });\n      return obj;\n    },\n    updateTime: function updateTime(e) {\n      this.currentTime = e.target.currentTime; //获取audio当前播放时间\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1); //返回上一层\n    },\n    onBeforePlay: function onBeforePlay(next) {\n      next(); // 开始播放\n\n      this.getDuration();\n    },\n    getlyric: function getlyric() {\n      var _this2 = this;\n\n      var self = this;\n      console.log(this.$refs);\n      this.$http.get(\"/api/lyric\", {\n        params: {\n          id: this.$route.params.id\n        }\n      }).then(function (response) {\n        _this2.lyric = self.lyricToObj(response.data.lrc.lyric);\n      }).catch(function (error) {\n        console.log(\"接口或处理逻辑出错\");\n      });\n    },\n    getMusicInfo: function getMusicInfo() {\n      var _this3 = this;\n\n      var this_ = this;\n      this.$http.get(this.host + \"/song/url\", {\n        params: {\n          id: this.$route.params.id\n        }\n      }).then(function (response) {\n        var _iterator = _createForOfIteratorHelper(_this3.playList),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var item = _step.value;\n\n            if (item.id == _this3.$route.params.id) {\n              _this3.musicInfo = item;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        _this3.audioSources = {\n          title: _this3.musicInfo.name,\n          artist: _this3.musicInfo.ar[0].name,\n          pic: _this3.musicInfo.al.picUrl + \"?param=500y500\",\n          src: response.data.data[0].url,\n          id: _this3.$route.params.id\n        };\n\n        _this3.audioList.push(response.data.data[0].url);\n\n        _this3.$store.commit(\"addSongToHistory\", _this3.audioSources);\n      }).catch(function (error) {\n        console.log(\"接口或处理逻辑出错\");\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getMusicInfo();\n    this.getlyric();\n  },\n  computed: _objectSpread({}, mapState([\"playList\", \"playHistory\"]))\n};",{"version":3,"sources":["player.vue"],"names":[],"mappings":"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","sourcesContent":[" \n<template>\n  <div v-if=\"audioList.length\">\n    <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\n    <van-swipe class=\"my-swipe myswipe\" indicator-color=\"red\">\n      <van-swipe-item>\n        <div class=\"v-image\">\n          <div class=\"border\">\n            <van-image\n              :src=\"audioSources.pic\"\n              round\n              :class=\"{'Rotation':isPlaying}\"\n              style=\"width:100%\"\n            ></van-image>\n          </div>\n          <div class=\"title\">{{audioSources.title+'-'+audioSources.artist}}</div>\n        </div>\n      </van-swipe-item>\n      <van-swipe-item  class=\"v-lyric\">\n        \n        <LyricScroll ref=\"lyric\" :lyric=\"lyric\" lyricLineheight=\"1.2em\" :current-time=\"currentTime\" :lyricActiveClass=\"active\" />\n      </van-swipe-item>\n    </van-swipe>\n\n    <AudioPlayer\n      ref=\"audio\"\n      :audio-list=\"audioList\"\n      :before-play=\"onBeforePlay\"\n      style=\"position: fixed;width: 90%;bottom: 20px;}\"\n      @timeupdate=\"onTimeUpdate\"\n      @play=\"iPlaying\"\n      @pause=\"stopP\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport { AudioPlayer } from \"@liripeng/vue-audio-player\";\nimport \"@liripeng/vue-audio-player/lib/vue-audio-player.css\";\nimport LyricScroll from \"vue-lyric-scroll\";\n\nexport default {\n  name: \"app\",\n  data() {\n    return {\n      audioSources: {},\n      audioList: [],\n      duration: {},\n      timeupdate: {},\n      currentTime: 0,\n      isPlaying: false,\n      xuzhuan: \"Rotation\",\n      lyric: {},\n      active:\"lyric-active\"\n      \n    };\n  },\n  components: {\n    AudioPlayer,\n    LyricScroll\n  },\n  watch: {\n    isPlayinga(old, nw) {\n      //监听正在播放的歌曲改变\n      console.log(old);\n    }\n  },\n  methods: {\n    stopP() {\n      this.isPlaying = false;\n    },\n    iPlaying() {\n      this.isPlaying = true;\n      let audio = this.$refs.audio;\n    },\n    onTimeUpdate(e) {\n      this.currentTime = e.target.currentTime;\n      console.log(this.currentTime);\n    },\n    getDuration() {\n      let audio = this.$refs.audio;\n\n      //此时可以获取到duration\n      this.duration = audio.duration;\n    },\n        timeStrToNum(str) {\n      const minute = Number(str.slice(0, 2))\n      const second = Number(str.slice(3, 5))\n      const minSec = Number(str.slice(6, 8))\n      return minute * 60 + second + minSec / 100\n    },\n    // 将歌词字符串转换为对象，格式为{开始时间: 歌词, ...}\n    lyricToObj(lyricStr) {\n            \n        \n      const obj = {}\n      let perLyric\n      let time\n      lyricStr.split('\\n').forEach((item, idx) => {\n        perLyric = item.slice(item.indexOf(']') + 1)\n        if (perLyric) {\n          time = this.timeStrToNum(item.slice(1, 9))\n          obj[time] = perLyric\n        }\n      })\n      return obj\n    },\n    updateTime(e) {\n      this.currentTime = e.target.currentTime; //获取audio当前播放时间\n    },\n\n    onClickLeft() {\n      this.$router.go(-1); //返回上一层\n    },\n    onBeforePlay(next) {\n       \n      next(); // 开始播放\n      this.getDuration();\n    },\n    getlyric() {\n      const self = this;\n      console.log(this.$refs)\n      this.$http\n        .get(\"/api/lyric\", { params: { id: this.$route.params.id } })\n        .then(response => {\n          this.lyric =self.lyricToObj(response.data.lrc.lyric) ;\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    },\n    getMusicInfo() {\n      const this_ = this;\n      this.$http\n        .get(this.host+\"/song/url\", { params: { id: this.$route.params.id } })\n        .then(response => {\n          for (const item of this.playList) {\n            if (item.id == this.$route.params.id) {\n              this.musicInfo = item;\n            }\n          }\n\n          this.audioSources = {\n            title: this.musicInfo.name,\n            artist: this.musicInfo.ar[0].name,\n            pic: this.musicInfo.al.picUrl + \"?param=500y500\",\n            src: response.data.data[0].url,\n            id: this.$route.params.id\n          };\n          this.audioList.push(response.data.data[0].url);\n          this.$store.commit(\"addSongToHistory\", this.audioSources);\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    }\n  },\n  mounted() {\n    this.getMusicInfo();\n    this.getlyric();\n  },\n  computed: {\n    \n    ...mapState([\"playList\", \"playHistory\"])\n  }\n};\n</script>\n <style  >\n .v-lyric{\n     text-align: center !important;\n }\n .lyric-active{\n    color: red !important;\n    font-size: 20px;\n}\n.v-image {\n  position: absolute;\n  left: 15%;\n  top: 15%;\n  width: 70%;\n  box-sizing: border-box;\n}\n.border {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n@-webkit-keyframes rotation {\n  from {\n    -webkit-transform: rotate(0deg);\n  }\n  to {\n    -webkit-transform: rotate(360deg);\n  }\n}\n\n.Rotation {\n  -webkit-transform: rotate(360deg);\n  animation: rotation 8s linear infinite;\n  -moz-animation: rotation 8s linear infinite;\n  -webkit-animation: rotation 8s linear infinite;\n  -o-animation: rotation 8s linear infinite;\n}\n.title {\n  padding-top: 12px;\n  text-align: center;\n}\n.myswipe {\n  height: 25rem;\n}\n\n</style>"],"sourceRoot":"src/pages"}]}