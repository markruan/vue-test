{"remainingRequest":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js!/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/vue/vue-test/src/pages/MoreGeDan.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/vue/vue-test/src/pages/MoreGeDan.vue","mtime":1603436242298},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mark/vue/vue-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.string.sub\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      catList: [],\n      tabIndex: 0,\n      active: \"home\",\n      geDanList: [],\n      isloading: true\n    };\n  },\n  watch: {},\n  methods: {\n    getCatList: function getCatList() {\n      var _this = this;\n\n      var list = localStorage.getItem(\"catlist\");\n\n      if (list != null) {\n        this.catList = JSON.parse(localStorage.getItem(\"catlist\"));\n        this.getGeDanList(0);\n      } else {\n        console.log(\"http\");\n        this.$http.get(this.host + \"/playlist/catlist\").then(function (response) {\n          _this.catList = response.data.sub;\n\n          _this.getGeDanList(0);\n\n          localStorage.setItem(\"catlist\", JSON.stringify(_this.catList));\n        }).catch(function (error) {\n          console.log(\"接口或处理逻辑出错\");\n        });\n      }\n    },\n    getGeDanList: function getGeDanList(index) {\n      var _this2 = this;\n\n      this.$http.get(this.host + \"/top/playlist\", {\n        params: {\n          cat: this.catList[index].name,\n          limit: 21\n        }\n      }).then(function (response) {\n        _this2.geDanList = response.data.playlists;\n\n        if (_this2.geDanList.length > 20) {\n          _this2.isloading = false;\n        } // this.$nextTick(() => {\n        // });\n\n      }).catch(function (error) {\n        console.log(\"接口或处理逻辑出错\");\n      });\n    },\n    indexChange: function indexChange(e) {\n      this.getGeDanList(e);\n      this.isloading = true;\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    imgLoad: function imgLoad(e) {\n      this.isloading = false;\n    }\n  },\n  mounted: function mounted() {\n    this.getCatList();\n  }\n};",{"version":3,"sources":["MoreGeDan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,CAFA;AAGA,MAAA,MAAA,EAAA,MAHA;AAIA,MAAA,SAAA,EAAA,EAJA;AAKA,MAAA,SAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,KAAA,EAAA,EAVA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,UAAA,IAAA,GAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA;;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,YAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;AACA,aAAA,YAAA,CAAA,CAAA;AACA,OAHA,MAGA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,aAAA,KAAA,CACA,GADA,CACA,KAAA,IAAA,GAAA,mBADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,GAAA;;AACA,UAAA,KAAA,CAAA,YAAA,CAAA,CAAA;;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,SAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,SANA,EAOA,KAPA,CAOA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,SATA;AAUA;AACA,KAnBA;AAoBA,IAAA,YApBA,wBAoBA,KApBA,EAoBA;AAAA;;AACA,WAAA,KAAA,CACA,GADA,CACA,KAAA,IAAA,GAAA,eADA,EACA;AACA,QAAA,MAAA,EAAA;AAAA,UAAA,GAAA,EAAA,KAAA,OAAA,CAAA,KAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA;AAAA;AADA,OADA,EAIA,IAJA,CAIA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAAA,SAAA;;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,MAAA,GAAA,EAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,KAAA;AACA,SAJA,CAMA;AAEA;;AACA,OAbA,EAcA,KAdA,CAcA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,WAAA;AACA,OAhBA;AAiBA,KAtCA;AAuCA,IAAA,WAvCA,uBAuCA,CAvCA,EAuCA;AACA,WAAA,YAAA,CAAA,CAAA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,KA1CA;AA2CA,IAAA,WA3CA,yBA2CA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KA7CA;AA8CA,IAAA,OA9CA,mBA8CA,CA9CA,EA8CA;AACA,WAAA,SAAA,GAAA,KAAA;AACA;AAhDA,GAZA;AA8DA,EAAA,OA9DA,qBA8DA;AACA,SAAA,UAAA;AACA;AAhEA,CAAA","sourcesContent":["<template>\n  <div>\n    <van-nav-bar title=\"歌单广场\" left-text=\"返回\" @click-left=\"onClickLeft\" left-arrow />\n\n    <van-tabs v-model=\"active\" sticky @change=\"indexChange\" swipeable>\n      <van-tab v-for=\"item in catList\" :key=\"item.name\" :title=\"item.name \" animated>\n        <van-loading v-if=\"isloading\" type=\"circular\" color=\"#1989fa\" vertical />\n        <van-grid v-else :column-num=\"3\" :border=\"false\">\n          <van-grid-item v-for=\"value in geDanList\" :key=\"value.id\" :to=\"'/list/'+value.id\">\n            <van-image\n              :src=\"value.coverImgUrl+'?param=150y150'\"\n              lazy-load\n              @load=\"imgLoad\"\n              :loading-icon=\"require('../assets/loading.gif')\"\n              width=\"100%\"\n              fit=\"contain\"\n            />\n            <span\n              style=\"font-size:12px;height:32px;line-height:1.4\"\n              class=\"van-multi-ellipsis--l2\"\n            >{{value.name}}</span>\n          </van-grid-item>\n        </van-grid>\n      </van-tab>\n    </van-tabs>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      catList: [],\n      tabIndex: 0,\n      active: \"home\",\n      geDanList: [],\n      isloading: true\n    };\n  },\n  watch: {},\n\n  methods: {\n    getCatList() {\n      const list = localStorage.getItem(\"catlist\");\n      if (list != null) {\n        this.catList = JSON.parse(localStorage.getItem(\"catlist\"));\n        this.getGeDanList(0);\n      } else {\n        console.log(\"http\");\n        this.$http\n          .get(this.host + \"/playlist/catlist\")\n          .then(response => {\n            this.catList = response.data.sub;\n            this.getGeDanList(0);\n            localStorage.setItem(\"catlist\", JSON.stringify(this.catList));\n          })\n          .catch(error => {\n            console.log(\"接口或处理逻辑出错\");\n          });\n      }\n    },\n    getGeDanList(index) {\n      this.$http\n        .get(this.host + \"/top/playlist\", {\n          params: { cat: this.catList[index].name, limit: 21 }\n        })\n        .then(response => {\n          this.geDanList = response.data.playlists;\n          if(this.geDanList .length>20){\n             this.isloading = false;\n          }\n\n          // this.$nextTick(() => {\n            \n          // });\n        })\n        .catch(error => {\n          console.log(\"接口或处理逻辑出错\");\n        });\n    },\n    indexChange(e) {\n      this.getGeDanList(e);\n      this.isloading = true;\n    },\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    imgLoad(e) {\n      this.isloading = false;\n    }\n  },\n  mounted() {\n    this.getCatList();\n  }\n};\n</script>\n<style scoped>\n</style>>"],"sourceRoot":"src/pages"}]}